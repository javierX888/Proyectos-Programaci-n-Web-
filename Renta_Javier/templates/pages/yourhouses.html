{% extends 'base/base.html' %}
{% block title %} Tus Propiedades | {{ request.session.username }} {% endblock %}
{% block content %}
{% load static %}
{% if request.session.username %}
<div class="container-lg">
    {% include 'includes/messages.html' %}
    
    <div class="featured-home content-area">
        <div class="container">
            <div class="main-title">
                <h1>Tus Propiedades</h1>
                <p>Añade más para acomodar a otros viajeros en Chile</p>
            </div>
        </div>
    </div>

    <div class="row g-3 justify-content-center house-cards-container">
        <!-- Aquí iría el bucle para mostrar las propiedades -->
    </div>

    <div class="widget advanced-search d-none-992" style="position: relative; text-align: center;">
        {% csrf_token %}
        <button class="btn btn-primary" id="addPropertyBtn">Añadir Propiedad</button>
    </div>

    <!-- Modal para información de patente comercial -->
    <div class="modal fade" id="patenteModal" tabindex="-1" aria-labelledby="patenteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="patenteModalLabel">Información de Patente Comercial</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Recuerda que para alquilar propiedades en Chile, es posible que necesites una patente comercial. Consulta con tu municipalidad local para más información.</p>
                    <!-- Aquí podrías añadir un formulario para ingresar información de la patente si es necesario -->
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="background-container">
    <h3 class="intro">¡Debes iniciar sesión para añadir una propiedad!</h3>
    <a href="{% url 'signin' %}" class="btn btn-outline-light btn-link-search">Iniciar sesión</a>
</div>
{% endif %}
{% endblock content %}

{% block includejs %}
<script>
    document.getElementById('addPropertyBtn').addEventListener('click', function() {
        $('#patenteModal').modal('show');
    });
</script>
{% endblock includejs %}